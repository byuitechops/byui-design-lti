<!doctype html>

<html>

<head>
  <title>Page Title</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1.0">
  <link type="text/css" rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/82d059ca224b79f71841c76bfb9c7b7c/variables-750d72b9d3e5d522f965bf904110c132.css">
  <link type="text/css" rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/new_styles_normal_contrast/bundles/common-688b35b63b.css">
  <link type="text/css" rel="stylesheet" href="https://du11hjcvx0uqb.cloudfront.net/dist/brandable_css/no_variables/bundles/wiki_page-46e7e026f6.css">
  <link type="text/css" rel="stylesheet" href="https://instructure-uploads.s3.amazonaws.com/account_107060000000000001/attachments/52868/online.css">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>  <style>
    .row {
      display: flex;
      align-items: flex-start;
      border-bottom: #ccc solid 1px;
      padding: 5px;
    }

    .option,
    .row>div,
    .row>p {
      margin: 5px 20px;
      box-sizing: border-box;
    }

    .option,
    .row>p {
      min-width: 25%;
      width: 25%;
      max-width: 25%;
    }

    .preview {
      flex-grow: 1;
    }

    #article {
      padding: 20px;
    }

    input[type="text"], select, textarea {
      width: 100%;
      margin: 10px 0 0;
    }
  
    textarea{
      resize: vertical;
    }

    #article #header {
      display: block !important;
    }

    .page {
      display: none;
    }

    .page.visible {
      display: block;
    }

    nav {
      display: flex;
    }

    .tab {
      flex-grow: 1;
      text-align: center;
      background: #0C4496;
      color: #fff;
      height: 40px;
    }

    .tab:hover,
    .tab:active,
    .tab:visited {
      color: white;
    }

    .embedded>#article {
      height: calc(100vh - 80px);
      overflow-y: auto;
    }

    .margin {
      margin: 5px 0;
    }

  </style>
</head>

<body class="is-inside-submission-frame embedded">
  <nav>
    <a class="tab" href='#' onclick="changeFocus('pageOne')">
      <h4>Campus Features</h4>
    </a>
    <a class="tab" href="#" onclick="changeFocus('pageTwo')">
      <h4>Course Templates</h4>
    </a>
  </nav>
  <div id="article">
    <div id="pageOne" class="page visible">
      <h3>Select the feature you would like to insert</h3>
      <div class="row">
        <p>Feature</p>
        <p>Preview</p>
      </div>
      <!-- This pattern for new features (new row for each with link and preview, preview has an id template at the bottom) -->
      <div class="row" id="button">
        <div class="option">
          <a class="Button" href="#" onclick="respond('button')">Insert Button</a>
          <input type="text" placeholder="Button Text" oninput="updateButton()">
          <input type="text" placeholder="Button HTML" oninput="updateButton()">
          <input type="checkbox" id="blue">
          <label for="blue">Make Primary?</label>
        </div>
        <div class="preview" id="buttonOut">
          <a class="Button" href="#">Button Text</a>
        </div>
      </div>
      <div class="row" id="banner">
        <div class="option">
          <a class="Button" href="#" onclick="respond('banner')">Insert Banner</a>
          <select id="activitySelected">
            <optgroup label="Prepare">
              <option value="prepare caseStudy">Case Study</option>
              <option value="prepare checkUnderstanding">Check-Your-Understanding</option>
              <option value="prepare preAssessment">Pre-Assessment</option>
              <option value="prepare readings">Readings</option>
              <option value="prepare research">Research</option>
              <option value="prepare video">Video</option>
            </optgroup>
            <optgroup label="Teach One Another">
              <option value="teach caseStudy">Case Study</option>
              <option value="teach fieldExperience">Field Experience Sharing</option>
              <option value="teach groupPresentation">Group Presentation</option>
              <option value="teach groupProblemSolving">Group Problem Solving</option>
              <option value="teach groupProject">Group Project</option>
              <option value="teach iceBreaker">Ice-Breaker</option>
              <option value="teach insightSharing">Insight Sharing</option>
              <option value="teach jigsawActivity">Jigsaw Activity</option>
              <option value="teach peerAccountability">Peer Accountability</option>
              <option value="teach peerFeedback">Peer Feedback</option>
              <option value="teach rolePlayDiscussion">Role Play Discussion</option>
              <option value="teach structuredDebate">Structured Debate</option>
              <option value="teach studyGroup">Study Group</option>
              <option value="teach supportForum">Support Forum</option>
              <option value="teach topicDiscussion">Topic Discussion</option>
            </optgroup>
            <optgroup label="Ponder and Prove">
              <option value="ponder assessment">Assessment</option>
              <option value="ponder demonstrateProficiency">Demonstrate Proficiency</option>
              <option value="ponder practiceApply">Practice/Apply</option>
              <option value="ponder presentation">Presentation</option>
              <option value="ponder reflection">Reflection</option>
            </optgroup>
            <optgroup label="Other">
              <option value="other">Other</option>
            </optgroup>
          </select>
          <select id="activityCategory" style="display: none;">
            <option value="prepare">Prepare</option>
            <option value="teach">Teach One Another</option>
            <option value="ponder">Ponder</option>
          </select>
        </div>
        <div class="preview" id="bannerOut">
          <h1 class="activity prepare caseStudy">Case Study</h1>
        </div>
      </div>
      <div class="row" id="accordion">
        <div class="option">
          <a class="Button" href="#" onclick="respond('accordion')">Insert Accordion</a>
          <input type="text" placeholder="Heading Text" onkeyup="updateAccordion()">
          <textarea placeholder="Content Text" onkeyup="updateAccordion()"></textarea>
        </div>
        <div class="preview" id="accordionOut">
          <div class="accordion" id="this_page_1">
            <h3>Section 1</h3>
            <div>
              <p>Content for Section 1</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row" id="callout">
        <div class="option">
          <a class="Button" href="#" onclick="respond('callout')">Insert Callout</a>
        </div>
        <div class="preview">
          <p>At vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla
            <span id="calloutOut"><span class="pad-box-mini border border-trbl border-round right quarter"><em>This is a callout box which can be used to emphasize text.</em></span></span>
            facilisi. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
        </div>
      </div>
      <div class="row">
        <div class="option">
          <a class="Button" href="#" onclick="respond('table')">Insert Table</a>
        </div>
        <div class="preview" id="table">
          <table class="ic-Table">
            <tbody>
              <tr>
                <th>Heading</th>
                <th>Heading</th>
                <th>Heading</th>
              </tr>
              <tr>
                <td>Text</td>
                <td>Text</td>
                <td>Text</td>
              </tr>
              <tr>
                <td>Text</td>
                <td>Text</td>
                <td>Text</td>
              </tr>
              <tr>
                <td>Text</td>
                <td>Text</td>
                <td>Text</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row" id="columns">
        <div class="option">
          <a class="Button" href="#" onclick="respond('columns')">Insert Columns</a>
        </div>
        <div class="preview" id="columnsOut">
          <div class="content-box">
            <div class="grid-row">
              <div class="col-xs-6">
                <ul>
                  <li>Lorem ipsum dolor</li>
                  <li>Lorem ipsum dolor</li>
                </ul>
              </div>
              <div class="col-xs-6">
                <ul>
                  <li>Lorem ipsum dolor</li>
                  <li>Lorem ipsum dolor</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" id="contentBox">
        <div class="option">
          <a class="Button" href="#" onclick="respond('contentBox')">Insert Content Box</a>
        </div>
        <div class="preview" id="contentBoxOut">
          <div class="content-box pad-box-mini border border-trbl border-round">
            <p>Your content here</p>
          </div>
        </div>
      </div>
      <div class="row" id="templateLarge">
        <div class="option">
          <a class="Button" href="#" onclick="respond('templateLarge')">Insert Large Template</a>
        </div>
        <div class="preview" id="templateLargeOut">
          <div id="content" class="byui">
            <div id="header">
              <img src="https://byui.instructure.com/courses/<%= courseNumber %>/file_contents/course%20files/Web%20Files/largeBanner.jpg" alt="Course Banner" />
            </div>
            <div id="article">

              <h1>Heading 1</h1>
              <h2>Heading 2</h2>
              <h3>Heading 3</h3>
              <h4>Heading 4</h4>
              <h5>Heading 5</h5>

              <hr />

              <h2>Paragraph Title</h2>

              <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row" id="templateSmall">
        <div class="option">
          <a class="Button" href="#" onclick="respond('templateSmall')">Insert Small Template</a>
        </div>
        <div class="preview" id="templateSmallOut">
          <div id="content" class="byui">
            <div id="header">
              <img src="https://byui.instructure.com/courses/<%= courseNumber %>/file_contents/course%20files/Web%20Files/smallBanner.jpg" alt="Course Banner" />
            </div>
            <div id="article">
              <h1>Heading 1</h1>
              <h2>Heading 2</h2>
              <h3>Heading 3</h3>
              <h4>Heading 4</h4>
              <h5>Heading 5</h5>

              <hr />

              <h2>Page Content</h2>
              <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>

              <h4>Numbered List</h4>

              <ol>
                <li>Lorem ipsum dolor</li>
                <li>Lorem ipsum dolor</li>
                <li>Lorem ipsum dolor</li>
              </ol>

              <h4>Un-numbered List</h4>
              <ul>
                <li>Lorem ipsum dolor</li>
                <li>Lorem ipsum dolor</li>
                <li>Lorem ipsum dolor</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="row" id="bannerLarge">
        <div class="option">
          <a class="Button" href="#" onclick="respond('bannerLarge')">Insert Large Banner</a>
        </div>
        <div class="preview" id="bannerLargeOut">
          <div id="header">
            <img src="https://byui.instructure.com/courses/<%= courseNumber %>/file_contents/course%20files/Web%20Files/largeBanner.jpg" alt="Course Banner" />
          </div>
        </div>
      </div>
      <div class="row" id="bannerSmall">
        <div class="option">
          <a class="Button" href="#" onclick="respond('bannerSmall')">Insert Small Banner</a>
        </div>
        <div class="preview" id="bannerSmallOut">
          <div id="header">
            <img src="https://byui.instructure.com/courses/<%= courseNumber %>/file_contents/course%20files/Web%20Files/smallBanner.jpg" alt="Course Banner" />
          </div>
        </div>
      </div>
      <!--  update the row id="-------", onclick parameter, the id on the preview, and the inner HTML in the preview
    ****** No comments in the exported html *******
    <div class="row" id="feature">
      <div class="option">
        <a class="Button" href="#" onclick="respond('feature')">Insert Feature</a>
      </div>
      <div class="preview" id="featureOut">
         Feature HTML goes here 
      </div>
    </div>
-->
      <!---------------- Don't Mess with this stuff ----------->
      <form method="post" action="<%= returnUrl %>" id="editor_button">
        <input type="hidden" name="lti_message_type" value="ContentItemSelection" />
        <input type="hidden" name="lti_version" value="LTI-1p0" />
        <input id="contentItems" type="hidden" name="content_items" value="<%= contentItems %>" />
      </form>
    </div>
    <div id="pageTwo" class="page">
      <div class="row">
        <h3>Templates can be uploaded to the 'Web Files/templates' folder</h3>
      </div>
      <div class="row">
        <div class="option">
          <% templates.forEach(function(template){ %>
            <a href="#" onclick="preview('<%= template.url %>')" class="Button margin">
              <%= template.display_name %>
            </a>
            <% }) %>
        </div>
        <div class="preview" id="templateOut">
          <h4>Please select an option to the left</h4>
        </div>
      </div>
      <div class="row">
        <div class="option">
          <a class="Button" id="submitTemplate" onclick="respond('template')" disabled>Insert Template</a>
        </div>
      </div>
    </div>
  </div>
  <script>
    var contentItems = <%- contentItems %>;
    var returnUrl = "<%= returnUrl %>"
    var courseNumber = "<%= courseNumber %>"

    function respond(featureName) {
      contentItems['@graph'][0].text = $('#' + featureName + "Out").html().toString().trim();
      $('#contentItems').val(JSON.stringify(contentItems))
      document.getElementById('editor_button').submit()
    }

    // Button generator
    function updateButton() {
      var text = $('#button input:nth-of-type(1)').val() || 'Button Text'
      var href = $('#button input:nth-of-type(2)').val()
      if ($('#button input:checkbox').is(':checked')) {
        $('#buttonOut a').addClass("Button--primary")
      } else {
        $('#buttonOut a').removeClass("Button--primary")
      }
      $('#buttonOut a').text(text)
      $('#buttonOut a').attr("href", href)
    }

    $('#button input:checkbox').change(updateButton)

    function changeFocus(id) {
      $('.page').toggleClass('visible')
    }

    // Accordion generator
    function updateAccordion(){
      var heading = $('#accordion input').val();
      var content = $('#accordion textarea').val();
      $('.accordion h3').text(heading);
      $('.accordion div').html(content);
    }
    
    // Preview templates
    function preview(url) {
      $.get("/preview?url=" + encodeURIComponent(url)).done(function(response) {
        if (response != "") {
          $('#templateOut').html(response)
          $('#submitTemplate').removeAttr('disabled')
        }
      })
    }

    //  Activity Banner Builder
    var selected = document.getElementById("activitySelected"),
      category = document.getElementById("activityCategory"),
      bannerDiv = document.getElementById("bannerOut")

    function changeBanner(e) {
      var classNames = selected.value,
        bannerText = selected.options[selected.selectedIndex].label,
        h1Code

      if (bannerText === "Other") {
        category.style.display = "inline";
        bannerText = "Activity Name";
        classNames = category.value + " other";
      } else {
        category.style.display = "none";
      }
      h1Code = '<h1 class="activity ' + classNames + '">' + bannerText + '</h1>';
      bannerDiv.innerHTML = h1Code;
    }

    selected.onchange = changeBanner;
    category.onchange = changeBanner;
    
    //  Accordion init
    $(document).ready(function () {
      $('div.accordion').accordion({
        heightStyle: 'content',
        collapsible: true,
        active: false
      });
      
      if (document.querySelector('.byui') !== null) {
        document.querySelector('.byui').insertAdjacentHTML('beforeend', '<link type="text/css" rel="stylesheet" href="https://byui.instructure.com/courses/' + courseNumber + '/file_contents/course%20files/Web%20Files/course-min.css" >')
      }
    });
    
  </script>
</body>

</html>

